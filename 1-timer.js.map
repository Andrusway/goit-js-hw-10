{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst dateInput = document.querySelector(\"#datetime-picker\")\nconst startBtn = document.querySelector(\"[data-start]\")\n\nconst daysEl = document.querySelector(\"[data-days]\")\nconst hoursEl = document.querySelector(\"[data-hours]\")\nconst minEl = document.querySelector(\"[data-minutes]\")\nconst secEl = document.querySelector(\"[data-seconds]\")\n\n\nstartBtn.disabled = true\nlet selectedTime = null\nlet timerId = null\n\n\nconst fp = flatpickr(dateInput, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates){\n    const picked = selectedDates[0]\n    if(!picked) {return}\n    if(picked.getTime() <= Date.now()){\n      iziToast.error({\n        title: \"Error\",\n        message: \"Please choose a date in the future\",\n        position: \"topCenter\"\n      })\n      selectedTime = null\n      startBtn.disabled = true\n      return\n    }\n    selectedTime = picked.getTime()\n    startBtn.disabled = false\n    startBtn.classList.add(\"btn-active\")\n  }\n})\n\n\nstartBtn.addEventListener(\"click\", () => {\n  if(!selectedTime) return\n\n  startBtn.disabled = true\n  startBtn.classList.remove(\"btn-active\")\n  dateInput.disabled = true\n\n  if(timerId){\n    clearInterval(timerId)\n    timerId = null\n  }\n\n  tick()\n\n  timerId = setInterval(tick, 1000)\n\n})\n\n\nfunction tick() {\nconst now = Date.now()\nconst diff = selectedTime - now\n\nif(diff <= 0){\n  clearInterval(timerId)\n  timerId = null\n  updateDisplay({days: 0, hours: 0, minutes: 0, seconds: 0})\n  dateInput.disabled = false\n  selectedTime = null\n  startBtn.disabled = true\n  return\n}\n\nconst t = convertMs(diff)\nupdateDisplay(t)\n}\n\nfunction convertMs(ms){\n  const second = 1000\n  const minute = second * 60\n  const hour = minute * 60\n  const day = hour * 24\n\n\n  const days = Math.floor(ms / day)\n  const hours = Math.floor((ms % day) / hour)\n  const minutes = Math.floor((ms % hour) / minute)\n  const seconds = Math.floor((ms % minute) / second)\n  \n  return {days, hours, minutes, seconds}\n}\n\nfunction updateDisplay({days, hours, minutes, seconds}){\n  daysEl.textContent = String(days).padStart(2, \"0\")\n  hoursEl.textContent = String(hours).padStart(2, \"0\")\n  minEl.textContent = String(minutes).padStart(2, \"0\")\n  secEl.textContent = String(seconds).padStart(2, \"0\")\n}"],"names":["dateInput","startBtn","daysEl","hoursEl","minEl","secEl","selectedTime","timerId","flatpickr","selectedDates","picked","iziToast","tick","now","diff","updateDisplay","t","convertMs","ms","days","hours","minutes","seconds"],"mappings":"2FAOA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAW,SAAS,cAAc,cAAc,EAEhDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAQ,SAAS,cAAc,gBAAgB,EAC/CC,EAAQ,SAAS,cAAc,gBAAgB,EAGrDJ,EAAS,SAAW,GACpB,IAAIK,EAAe,KACfC,EAAU,KAGHC,EAAUR,EAAW,CAC9B,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQS,EAAc,CACpB,MAAMC,EAASD,EAAc,CAAC,EAC9B,GAAIC,EACJ,IAAGA,EAAO,QAAO,GAAM,KAAK,IAAG,EAAG,CAChCC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WAClB,CAAO,EACDL,EAAe,KACfL,EAAS,SAAW,GACpB,MACD,CACDK,EAAeI,EAAO,QAAS,EAC/BT,EAAS,SAAW,GACpBA,EAAS,UAAU,IAAI,YAAY,EACpC,CACH,CAAC,EAGDA,EAAS,iBAAiB,QAAS,IAAM,CACnCK,IAEJL,EAAS,SAAW,GACpBA,EAAS,UAAU,OAAO,YAAY,EACtCD,EAAU,SAAW,GAElBO,IACD,cAAcA,CAAO,EACrBA,EAAU,MAGZK,EAAM,EAENL,EAAU,YAAYK,EAAM,GAAI,EAElC,CAAC,EAGD,SAASA,GAAO,CAChB,MAAMC,EAAM,KAAK,IAAK,EAChBC,EAAOR,EAAeO,EAE5B,GAAGC,GAAQ,EAAE,CACX,cAAcP,CAAO,EACrBA,EAAU,KACVQ,EAAc,CAAC,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAC,EACzDf,EAAU,SAAW,GACrBM,EAAe,KACfL,EAAS,SAAW,GACpB,MACF,CAEA,MAAMe,EAAIC,EAAUH,CAAI,EACxBC,EAAcC,CAAC,CACf,CAEA,SAASC,EAAUC,EAAG,CAOpB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAOH,EAAK,KAAQ,GAAM,EACzCI,EAAU,KAAK,MAAOJ,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAC,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEA,SAASP,EAAc,CAAC,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAE,CACrDpB,EAAO,YAAc,OAAOiB,CAAI,EAAE,SAAS,EAAG,GAAG,EACjDhB,EAAQ,YAAc,OAAOiB,CAAK,EAAE,SAAS,EAAG,GAAG,EACnDhB,EAAM,YAAc,OAAOiB,CAAO,EAAE,SAAS,EAAG,GAAG,EACnDhB,EAAM,YAAc,OAAOiB,CAAO,EAAE,SAAS,EAAG,GAAG,CACrD"}